<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Pokemon Battle</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            background: linear-gradient(135deg, #1a2a6c, #b21f1f, #fdbb2d);
            font-family: 'Arial', sans-serif;
            height: 100vh;
            overflow: hidden;
            color: white;
        }

        .battle-container {
            width: 100%;
            height: 100vh;
            position: relative;
            background: url('data:image/svg+xml,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 800 600"><rect width="800" height="600" fill="%2300286b"/><circle cx="200" cy="150" r="80" fill="%231a4b8c" opacity="0.3"/><circle cx="600" cy="450" r="120" fill="%231a4b8c" opacity="0.2"/></svg>');
        }

        /* –ë–æ–µ–≤–∞—è —Å—Ü–µ–Ω–∞ */
        .battle-scene {
            position: absolute;
            width: 100%;
            height: 100%;
        }

        /* –ü–ª–∞—Ç—Ñ–æ—Ä–º—ã –¥–ª—è –ø–æ–∫–µ–º–æ–Ω–æ–≤ */
        .platform {
            position: absolute;
            background: rgba(139, 69, 19, 0.8);
            border: 3px solid #8B4513;
            border-radius: 20px;
            box-shadow: 0 10px 20px rgba(0,0,0,0.5);
        }

        .platform-player {
            width: 200px;
            height: 80px;
            bottom: 150px;
            left: 100px;
        }

        .platform-enemy {
            width: 200px;
            height: 80px;
            top: 150px;
            right: 100px;
        }

        /* –ü–æ–∫–µ–º–æ–Ω—ã */
        .pokemon {
            position: absolute;
            width: 120px;
            height: 120px;
            background-size: contain;
            background-repeat: no-repeat;
            background-position: center;
            transition: all 0.3s ease;
        }

        .pokemon-player {
            bottom: 180px;
            left: 130px;
            background-image: url('data:image/svg+xml,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 100 100"><circle cx="50" cy="50" r="45" fill="%23FF6B6B"/><circle cx="35" cy="40" r="8" fill="white"/><circle cx="65" cy="40" r="8" fill="white"/><circle cx="35" cy="40" r="4" fill="black"/><circle cx="65" cy="40" r="4" fill="black"/><path d="M 30 65 Q 50 75 70 65" stroke="black" stroke-width="3" fill="none"/></svg>');
        }

        .pokemon-enemy {
            top: 180px;
            right: 130px;
            background-image: url('data:image/svg+xml,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 100 100"><circle cx="50" cy="50" r="45" fill="%234ECDC4"/><circle cx="35" cy="40" r="8" fill="white"/><circle cx="65" cy="40" r="8" fill="white"/><circle cx="35" cy="40" r="4" fill="black"/><circle cx="65" cy="40" r="4" fill="black"/><path d="M 40 70 L 60 70" stroke="black" stroke-width="3"/></svg>');
        }

        /* HP –±–∞—Ä—ã */
        .hp-bar {
            position: absolute;
            width: 180px;
            height: 20px;
            background: #333;
            border: 2px solid #000;
            border-radius: 10px;
            overflow: hidden;
        }

        .hp-bar-player {
            bottom: 280px;
            left: 110px;
        }

        .hp-bar-enemy {
            top: 120px;
            right: 110px;
        }

        .hp-fill {
            height: 100%;
            background: linear-gradient(90deg, #FF6B6B, #FF8E8E);
            transition: width 0.5s ease;
            width: 100%;
        }

        .hp-fill.enemy {
            background: linear-gradient(90deg, #4ECDC4, #88D8C0);
        }

        /* –ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ –ø–æ–∫–µ–º–æ–Ω–∞—Ö */
        .pokemon-info {
            position: absolute;
            background: rgba(0,0,0,0.7);
            padding: 10px;
            border-radius: 10px;
            border: 2px solid gold;
        }

        .info-player {
            bottom: 310px;
            left: 110px;
        }

        .info-enemy {
            top: 90px;
            right: 110px;
        }

        /* –ú–µ–Ω—é –±–æ—è */
        .battle-menu {
            position: absolute;
            bottom: 50px;
            left: 50%;
            transform: translateX(-50%);
            width: 400px;
            background: rgba(0,0,0,0.9);
            border: 3px solid gold;
            border-radius: 15px;
            padding: 20px;
        }

        .menu-title {
            text-align: center;
            margin-bottom: 15px;
            color: gold;
            font-size: 18px;
        }

        .attack-buttons {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 10px;
        }

        .attack-btn {
            background: linear-gradient(135deg, #667eea, #764ba2);
            border: none;
            color: white;
            padding: 12px;
            border-radius: 8px;
            cursor: pointer;
            font-size: 14px;
            transition: all 0.3s ease;
        }

        .attack-btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(0,0,0,0.3);
        }

        .attack-btn:active {
            transform: translateY(0);
        }

        /* –°–æ–æ–±—â–µ–Ω–∏—è –±–æ—è */
        .battle-message {
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            background: rgba(0,0,0,0.9);
            padding: 20px 40px;
            border: 3px solid gold;
            border-radius: 15px;
            text-align: center;
            font-size: 20px;
            color: white;
            display: none;
        }

        /* –ê–Ω–∏–º–∞—Ü–∏–∏ */
        @keyframes attack {
            0% { transform: translateX(0); }
            50% { transform: translateX(50px); }
            100% { transform: translateX(0); }
        }

        @keyframes takeDamage {
            0% { transform: translateX(0); }
            25% { transform: translateX(-10px); }
            50% { transform: translateX(10px); }
            75% { transform: translateX(-10px); }
            100% { transform: translateX(0); }
        }

        .attacking {
            animation: attack 0.5s ease;
        }

        .taking-damage {
            animation: takeDamage 0.3s ease;
        }

        /* –ö–Ω–æ–ø–∫–∞ –≤–æ–∑–≤—Ä–∞—Ç–∞ */
        .return-btn {
            position: absolute;
            top: 20px;
            left: 20px;
            background: rgba(0,0,0,0.7);
            color: white;
            border: 2px solid gold;
            padding: 10px 20px;
            border-radius: 8px;
            cursor: pointer;
            font-size: 14px;
        }

        .return-btn:hover {
            background: rgba(255,215,0,0.3);
        }
    </style>
</head>
<body>
<div class="battle-container">
    <div class="battle-scene">
        <!-- –ü–ª–∞—Ç—Ñ–æ—Ä–º—ã -->
        <div class="platform platform-player"></div>
        <div class="platform platform-enemy"></div>

        <!-- –ü–æ–∫–µ–º–æ–Ω—ã -->
        <div class="pokemon pokemon-player" id="playerPokemon"></div>
        <div class="pokemon pokemon-enemy" id="enemyPokemon"></div>

        <!-- HP –±–∞—Ä—ã -->
        <div class="hp-bar hp-bar-player">
            <div class="hp-fill" id="playerHP" style="width: 100%"></div>
        </div>
        <div class="hp-bar hp-bar-enemy">
            <div class="hp-fill enemy" id="enemyHP" style="width: 100%"></div>
        </div>

        <!-- –ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è -->
        <div class="pokemon-info info-player">
            <div>Pikachu Lv.5</div>
            <div>HP: <span id="playerHPText">100/100</span></div>
        </div>
        <div class="pokemon-info info-enemy">
            <div>Bulbasaur Lv.5</div>
            <div>HP: <span id="enemyHPText">100/100</span></div>
        </div>

        <!-- –°–æ–æ–±—â–µ–Ω–∏—è -->
        <div class="battle-message" id="battleMessage"></div>

        <!-- –ö–Ω–æ–ø–∫–∞ –≤–æ–∑–≤—Ä–∞—Ç–∞ -->
        <button class="return-btn" onclick="returnToMain()">‚Üê –ù–∞–∑–∞–¥</button>
    </div>

    <!-- –ú–µ–Ω—é –±–æ—è -->
    <div class="battle-menu">
        <div class="menu-title">–í—ã–±–µ—Ä–∏—Ç–µ –∞—Ç–∞–∫—É:</div>
        <div class="attack-buttons">
            <button class="attack-btn" onclick="useAttack('thunderbolt')">‚ö° –£–¥–∞—Ä –º–æ–ª–Ω–∏–µ–π</button>
            <button class="attack-btn" onclick="useAttack('quickAttack')">üí® –ë—ã—Å—Ç—Ä–∞—è –∞—Ç–∞–∫–∞</button>
            <button class="attack-btn" onclick="useAttack('ironTail')">üî© –ñ–µ–ª–µ–∑–Ω—ã–π —Ö–≤–æ—Å—Ç</button>
            <button class="attack-btn" onclick="useAttack('thunderWave')">üåÄ –í–æ–ª–Ω–∞ –≥—Ä–æ–º–∞</button>
        </div>
    </div>
</div>

<script>
    // –°–æ—Å—Ç–æ—è–Ω–∏–µ –±–æ—è
    const battleState = {
        playerHP: 100,
        enemyHP: 100,
        playerMaxHP: 100,
        enemyMaxHP: 100,
        isPlayerTurn: true,
        gameOver: false
    };

    // –ê—Ç–∞–∫–∏ –ø–æ–∫–µ–º–æ–Ω–æ–≤
    const attacks = {
        thunderbolt: {
            name: "–£–¥–∞—Ä –º–æ–ª–Ω–∏–µ–π",
            damage: { min: 15, max: 25 },
            type: "electric"
        },
        quickAttack: {
            name: "–ë—ã—Å—Ç—Ä–∞—è –∞—Ç–∞–∫–∞",
            damage: { min: 10, max: 20 },
            type: "normal"
        },
        ironTail: {
            name: "–ñ–µ–ª–µ–∑–Ω—ã–π —Ö–≤–æ—Å—Ç",
            damage: { min: 20, max: 30 },
            type: "steel"
        },
        thunderWave: {
            name: "–í–æ–ª–Ω–∞ –≥—Ä–æ–º–∞",
            damage: { min: 5, max: 15 },
            type: "electric",
            effect: "paralyze"
        }
    };

    // –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ HP –±–∞—Ä–æ–≤
    function updateHPBars() {
        const playerHPPercent = (battleState.playerHP / battleState.playerMaxHP) * 100;
        const enemyHPPercent = (battleState.enemyHP / battleState.enemyMaxHP) * 100;

        document.getElementById('playerHP').style.width = playerHPPercent + '%';
        document.getElementById('enemyHP').style.width = enemyHPPercent + '%';

        document.getElementById('playerHPText').textContent =
            battleState.playerHP + '/' + battleState.playerMaxHP;
        document.getElementById('enemyHPText').textContent =
            battleState.enemyHP + '/' + battleState.enemyMaxHP;
    }

    // –ü–æ–∫–∞–∑–∞—Ç—å —Å–æ–æ–±—â–µ–Ω–∏–µ
    function showMessage(message, duration = 2000) {
        const messageElement = document.getElementById('battleMessage');
        messageElement.textContent = message;
        messageElement.style.display = 'block';

        setTimeout(() => {
            messageElement.style.display = 'none';
        }, duration);
    }

    // –ê–Ω–∏–º–∞—Ü–∏—è –∞—Ç–∞–∫–∏
    function animateAttack(attacker, target) {
        const attackerElement = document.getElementById(attacker);
        const targetElement = document.getElementById(target);

        attackerElement.classList.add('attacking');
        setTimeout(() => {
            attackerElement.classList.remove('attacking');
            targetElement.classList.add('taking-damage');
            setTimeout(() => {
                targetElement.classList.remove('taking-damage');
            }, 300);
        }, 500);
    }

    // –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ –∞—Ç–∞–∫–∏
    function useAttack(attackKey) {
        if (!battleState.isPlayerTurn || battleState.gameOver) return;

        const attack = attacks[attackKey];
        const damage = Math.floor(Math.random() * (attack.damage.max - attack.damage.min + 1)) + attack.damage.min;

        // –ê—Ç–∞–∫–∞ –∏–≥—Ä–æ–∫–∞
        battleState.enemyHP = Math.max(0, battleState.enemyHP - damage);

        // –ê–Ω–∏–º–∞—Ü–∏—è –∏ —Å–æ–æ–±—â–µ–Ω–∏–µ
        animateAttack('playerPokemon', 'enemyPokemon');
        showMessage(`–ü–∏–∫–∞—á—É –∏—Å–ø–æ–ª—å–∑—É–µ—Ç ${attack.name}! –ù–∞–Ω–µ—Å–µ–Ω–æ ${damage} —É—Ä–æ–Ω–∞!`);

        updateHPBars();
        battleState.isPlayerTurn = false;

        // –ü—Ä–æ–≤–µ—Ä–∫–∞ –ø–æ–±–µ–¥—ã
        if (battleState.enemyHP <= 0) {
            setTimeout(() => endBattle(true), 1500);
            return;
        }

        // –•–æ–¥ –ø—Ä–æ—Ç–∏–≤–Ω–∏–∫–∞
        setTimeout(enemyTurn, 2000);
    }

    // –•–æ–¥ –ø—Ä–æ—Ç–∏–≤–Ω–∏–∫–∞
    function enemyTurn() {
        if (battleState.gameOver) return;

        const attackKeys = Object.keys(attacks);
        const randomAttack = attackKeys[Math.floor(Math.random() * attackKeys.length)];
        const attack = attacks[randomAttack];
        const damage = Math.floor(Math.random() * (attack.damage.max - attack.damage.min + 1)) + attack.damage.min;

        // –ê—Ç–∞–∫–∞ –ø—Ä–æ—Ç–∏–≤–Ω–∏–∫–∞
        battleState.playerHP = Math.max(0, battleState.playerHP - damage);

        // –ê–Ω–∏–º–∞—Ü–∏—è –∏ —Å–æ–æ–±—â–µ–Ω–∏–µ
        animateAttack('enemyPokemon', 'playerPokemon');
        showMessage(`–ë—É–ª—å–±–∞–∑–∞–≤—Ä –∏—Å–ø–æ–ª—å–∑—É–µ—Ç ${attack.name}! –ù–∞–Ω–µ—Å–µ–Ω–æ ${damage} —É—Ä–æ–Ω–∞!`);

        updateHPBars();
        battleState.isPlayerTurn = true;

        // –ü—Ä–æ–≤–µ—Ä–∫–∞ –ø–æ—Ä–∞–∂–µ–Ω–∏—è
        if (battleState.playerHP <= 0) {
            setTimeout(() => endBattle(false), 1500);
        }
    }

    // –ó–∞–≤–µ—Ä—à–µ–Ω–∏–µ –±–∏—Ç–≤—ã
    function endBattle(playerWon) {
        battleState.gameOver = true;

        if (playerWon) {
            showMessage("–ü–æ–±–µ–¥–∞! –ü–∏–∫–∞—á—É –æ–¥–µ—Ä–∂–∞–ª –ø–æ–±–µ–¥—É!", 3000);
            // –ú–æ–∂–Ω–æ –¥–æ–±–∞–≤–∏—Ç—å –Ω–∞–≥—Ä–∞–¥—ã –∏–ª–∏ –ø–µ—Ä–µ—Ö–æ–¥ –¥–∞–ª—å—à–µ
        } else {
            showMessage("–ü–æ—Ä–∞–∂–µ–Ω–∏–µ! –ü–∏–∫–∞—á—É –ø—Ä–æ–∏–≥—Ä–∞–ª –±–∏—Ç–≤—É!", 3000);
        }

        // –ö–Ω–æ–ø–∫–∞ —Ä–µ—Å—Ç–∞—Ä—Ç–∞
        setTimeout(() => {
            const restartBtn = document.createElement('button');
            restartBtn.textContent = '–°—Ä–∞–∂–∞—Ç—å—Å—è —Å–Ω–æ–≤–∞';
            restartBtn.className = 'attack-btn';
            restartBtn.style.margin = '10px auto';
            restartBtn.style.display = 'block';
            restartBtn.onclick = restartBattle;

            document.querySelector('.battle-menu').appendChild(restartBtn);
        }, 3500);
    }

    // –†–µ—Å—Ç–∞—Ä—Ç –±–∏—Ç–≤—ã
    function restartBattle() {
        battleState.playerHP = 100;
        battleState.enemyHP = 100;
        battleState.isPlayerTurn = true;
        battleState.gameOver = false;

        updateHPBars();
        document.querySelector('.battle-menu').lastChild.remove();
        showMessage("–ù–æ–≤–∞—è –±–∏—Ç–≤–∞ –Ω–∞—á–∏–Ω–∞–µ—Ç—Å—è!");
    }

    // –í–æ–∑–≤—Ä–∞—Ç –≤ –≥–ª–∞–≤–Ω–æ–µ –º–µ–Ω—é
    function returnToMain() {
        if (confirm('–í–µ—Ä–Ω—É—Ç—å—Å—è –≤ –≥–ª–∞–≤–Ω–æ–µ –º–µ–Ω—é?')) {
            window.location.href = '../index.html'; // –∏–ª–∏ –ø—É—Ç—å –∫ –≤–∞—à–µ–π –≥–ª–∞–≤–Ω–æ–π —Å—Ç—Ä–∞–Ω–∏—Ü–µ
        }
    }

    // –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è
    document.addEventListener('DOMContentLoaded', function() {
        showMessage("–ë–∏—Ç–≤–∞ –Ω–∞—á–∏–Ω–∞–µ—Ç—Å—è! –ü–∏–∫–∞—á—É –ø—Ä–æ—Ç–∏–≤ –ë—É–ª—å–±–∞–∑–∞–≤—Ä–∞!", 2000);
        updateHPBars();
    });
</script>
</body>
</html>